# 比特币初识

1. 概叙

	```text
	比特币是一个软件系统,每个人都可以下载使用,使用者之间不断进行交易产生交易数据,这些数据以数据块的形式保存,最终存储在一个数据库中.
	这个包含交易的的数据块叫做区块,这个保存所有区块的数据库我们称之为区块链
	```

2. 基本信息

	[比特币](https://zh.wikipedia.org/wiki/%E6%AF%94%E7%89%B9%E5%B8%81)

3. 记账

	```text
	将系统中产生的交易数据存储到数据库的过程(数据上链),称之为记账

	比特币点对点网络将所有的交易历史都存储在区块链中，比特币交易就是在区块链账本上“记账”，通常它由比特币客户端协助完成。付款方需要以自己的私钥对交易进行数字签名，证明所有权并认可该次交易。比特币会被记录在收款方的地址上，交易无需收款方参与，收款方可以不在线，甚至不存在，交易的资金支付来源，也就是花费，称为“输入”，资金去向，也就是收入，称为“输出”。如有输入，输入必须大于等于输出，输入大于输出的部分即为交易手续费。
	```

	| 对比项 | 传统记账 | 比特币记账 |
	| :------: | :------: | :------: |
	| 交易记录存储位置 | 账单 | 区块 |
	| 记录集合 | 账本 | 区块链 |
	| 记账周期 | 写满了翻页 | 10分钟翻页 |
	| 记账人 | 会计之类的人 | 所有节点竞争 |
	| 奖励 | 死工资 | 记账奖励+手续费 |
	| 记账成本 | 人工工资和纸墨损耗 | 非常耗电/设备损耗 |
	| 账本数量 | 实体账本纸质或电子 | 所有节点人手一本 |

4. 概念通识
	* 钱包
		* [维基百科](https://zh.wikipedia.org/wiki/%E6%AF%94%E7%89%B9%E5%B8%81#%E9%8C%A2%E5%8C%85)
		* 表述
			* 创建私钥,公钥,保存私钥,可以存放多个地址
		* 地址: 类似于钱包中的不同银行卡
		* 私钥: 类似于银行卡密码,或者地址所有人证明
	* 节点
		* [维基百科](https://zh.wikipedia.org/wiki/%E6%AF%94%E7%89%B9%E5%B8%81#%E5%8C%BA%E5%9D%97%E9%93%BE)
		* 表述
			* 每一个运行挖矿软件的人变成一个区块链网络节点
		* 全节点: 下载整个区块链数据,参与交易验证和挖矿
		* 轻节点: 不下载整个区块链,只参与交易,通过其他全节点进行验证
	* 挖矿
		* [维基百科](https://zh.wikipedia.org/wiki/%E6%AF%94%E7%89%B9%E5%B8%81#%E6%8C%96%E7%A4%A6)
		* 表述
			* 对区块数据做哈希运算,寻找一个满足条件的随机数
		* 节点间竞争记账权力的过程叫做挖矿,竞争成功获得记账权利称为挖矿成功
		* 需要设备,电力,和全球所有挖矿人员竞争
		* 记账的过程会得到系统给予的奖励,这个过程类似从一个矿山开采矿石,所以称为挖矿
		* 每个全节点都可以进行挖矿,称为矿工,挖矿的能力称为算力

5. 系统参数
	* [比特币浏览器](https://blockchair.com/zh/bitcoin/)
	* 出块时间
		* 10分钟，系统根据当前出块时间动态调整难度值 (每2016个块调整一次，2周)，使得时间稳定在10分钟左右。包括同步时间，校验时间，计算时间等
		* 如果不控制10分钟产生一个区块，那么比特币就不能保证稳定的发行，秩序就会混乱
		* 安全性和适用性的权衡，太快容易同时出块(分叉)，需要频繁的处理，太慢影响使用体验。
	* 出块奖励
		* 最初50BTC，每21万个块奖励减半，10分钟，21万 * 10分钟/60/24小时/365 = 4年
	* 比特币总量
		* 大约2100万

		```go
		package main
		import "fmt"
		func main() {
			stepBlock := 21.0 // 每21w个区块奖励减半
			curGet := 50.0    // 初识奖励 50
			total := 0.0
			for curGet > 0 {
				curNum := stepBlock * curGet
				curGet *= 0.5
				total += curNum
			}
			fmt.Println(total)
		}
		```

	* 区块容量
		* 考虑同步率,1M大约容纳4000条交易
		* 1M / 每笔交易的字节 = 交易数 (1024 * 1024 / 223 = 4200)
	* 每秒成交量
		* 4200 * 600s = 7 笔/秒
	* 单位
		* 1BTC = $10^{8}$ sat

6. 交易流程
	* ![1.png](https://s2.loli.net/2023/08/31/ziIwq1VhAW9r4dS.png)
		1. 创建交易
		2. 广播交易
		3. 挖矿竞争
		4. 胜出!广播结束
		5. 记账,获得奖励,广播账本
		6. 同步账本,开启新一轮竞争

7. 使用的技术
	* [密码学](https://zh.wikipedia.org/wiki/%E5%AF%86%E7%A0%81%E5%AD%A6)
	* [P2P网络](https://zh.wikipedia.org/wiki/%E5%B0%8D%E7%AD%89%E7%B6%B2%E8%B7%AF)
	* [工作量证明](https://zh.wikipedia.org/wiki/%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AD%89%E6%98%8E)
	* [base58](https://zh.wikipedia.org/wiki/Base58)
6. 地址生成规则
	* [地址生成流程](https://gobittest.appspot.com/Address)